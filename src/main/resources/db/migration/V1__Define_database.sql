\nalter table if exists documents_comments drop constraint if exists FKls6jntgxm2qqcee7fof9q03hp;
\nalter table if exists documents_resources drop constraint if exists FKp9bqmaxlvwaog269sxuc0au5r;
\nalter table if exists participants drop constraint if exists FKc5j1r3h4hsb2saa1g8w3x2fhs;
\nalter table if exists participants_teams drop constraint if exists FKbqx7qqq9aes227khhn9nmk6j6;
\nalter table if exists participants_teams drop constraint if exists FK3kd2o6x6qq3tgt3bk8aaxflcu;
\nalter table if exists processes_steps drop constraint if exists FK7kpgpdkdi8ydnfm2eh404js32;
\nalter table if exists processes_steps drop constraint if exists FKpsgdkae7aie9fibwtgqq1599w;
\nalter table if exists step_documents drop constraint if exists FK1nlvnqxjadhytb78bsmn89j1c;
\nalter table if exists step_documents drop constraint if exists FKmcv8cfjr5c09buh96kt9n9r1g;
\nalter table if exists step_participant_rule drop constraint if exists FK1ar8rotbwyiyii6owr9uryyq4;
\nalter table if exists teams_participants drop constraint if exists FK7894q8hmdc6nmh3odsg8hccg7;
\nalter table if exists teams_processes drop constraint if exists FK13ueaqtco2bsw2qsp65omnj6x;
\nalter table if exists teams_processes drop constraint if exists FKetpsy6fdhjc9gs8440yd263x4;
\nalter table if exists user_roles drop constraint if exists FKhfh9dx7w3ubf1co1vdev94g3f;
\nalter table if exists users drop constraint if exists FKieuksut4ubn2x0gc088ihhni6;
\ndrop table if exists documents cascade;
\ndrop table if exists documents_comments cascade;
\ndrop table if exists documents_resources cascade;
\ndrop table if exists participants cascade;
\ndrop table if exists participants_teams cascade;
\ndrop table if exists processes cascade;
\ndrop table if exists processes_steps cascade;
\ndrop table if exists step_documents cascade;
\ndrop table if exists step_participant_rule cascade;
\ndrop table if exists steps cascade;
\ndrop table if exists teams cascade;
\ndrop table if exists teams_participants cascade;
\ndrop table if exists teams_processes cascade;
\ndrop table if exists user_roles cascade;
\ndrop table if exists users cascade;
\ncreate table documents (step_title varchar(255) not null, title varchar(255) not null, file bytea, format varchar(255), primary key (step_title, title));
\ncreate table documents_comments (step_title varchar(255) not null, title varchar(255) not null, comments varchar(255));
\ncreate table documents_resources (step_title varchar(255) not null, title varchar(255) not null, resources varchar(255));
\ncreate table participants (id int8 generated by default as identity, owner_id int8, primary key (id));
\ncreate table participants_teams (participant_id int8 not null, teams_title varchar(255) not null, primary key (participant_id, teams_title));
\ncreate table processes (id varchar(255) not null, current_step int4, title varchar(255), primary key (id));
\ncreate table processes_steps (process_id varchar(255) not null, steps_process_id varchar(255) not null, steps_title varchar(255) not null);
\ncreate table step_documents (process_id varchar(255) not null, title varchar(255) not null, documents_step_title varchar(255) not null, documents_title varchar(255) not null, primary key (process_id, title, documents_step_title, documents_title));
\ncreate table step_participant_rule (process_id varchar(255) not null, title varchar(255) not null, rules int4, participant_id varchar(255) not null, primary key (process_id, title, participant_id));
\ncreate table steps (process_id varchar(255) not null, title varchar(255) not null, number int4, primary key (process_id, title));
\ncreate table teams (title varchar(255) not null, team_leader_id int8, primary key (title));
\ncreate table teams_participants (team_id varchar(255) not null, participants varchar(255));
\ncreate table teams_processes (team_title varchar(255) not null, processes_id varchar(255) not null);
\ncreate table user_roles (user_id int8 not null, roles varchar(255));
\ncreate table users (id int8 generated by default as identity, online boolean, password varchar(255), username varchar(255), client_id int8, primary key (id));
\nalter table if exists processes_steps add constraint UK_l3g9fyng8f5e9xn2wu36cqh20 unique (steps_process_id, steps_title);
\nalter table if exists step_documents add constraint UK_lwyqbp49iuf5r1n9ytrf1mqpc unique (documents_step_title, documents_title);
\nalter table if exists teams_processes add constraint UK_beur1pk8tqx8skongipsijgwy unique (processes_id);
\nalter table if exists users add constraint UK_r43af9ap4edm43mmtq01oddj6 unique (username);
\nalter table if exists documents_comments add constraint FKls6jntgxm2qqcee7fof9q03hp foreign key (step_title, title) references documents;
\nalter table if exists documents_resources add constraint FKp9bqmaxlvwaog269sxuc0au5r foreign key (step_title, title) references documents;
\nalter table if exists participants add constraint FKc5j1r3h4hsb2saa1g8w3x2fhs foreign key (owner_id) references users;
\nalter table if exists participants_teams add constraint FKbqx7qqq9aes227khhn9nmk6j6 foreign key (teams_title) references teams;
\nalter table if exists participants_teams add constraint FK3kd2o6x6qq3tgt3bk8aaxflcu foreign key (participant_id) references participants;
\nalter table if exists processes_steps add constraint FK7kpgpdkdi8ydnfm2eh404js32 foreign key (steps_process_id, steps_title) references steps;
\nalter table if exists processes_steps add constraint FKpsgdkae7aie9fibwtgqq1599w foreign key (process_id) references processes;
\nalter table if exists step_documents add constraint FK1nlvnqxjadhytb78bsmn89j1c foreign key (documents_step_title, documents_title) references documents;
\nalter table if exists step_documents add constraint FKmcv8cfjr5c09buh96kt9n9r1g foreign key (process_id, title) references steps;
\nalter table if exists step_participant_rule add constraint FK1ar8rotbwyiyii6owr9uryyq4 foreign key (process_id, title) references steps;
\nalter table if exists teams_participants add constraint FK7894q8hmdc6nmh3odsg8hccg7 foreign key (team_id) references teams;
\nalter table if exists teams_processes add constraint FK13ueaqtco2bsw2qsp65omnj6x foreign key (processes_id) references processes;
\nalter table if exists teams_processes add constraint FKetpsy6fdhjc9gs8440yd263x4 foreign key (team_title) references teams;
\nalter table if exists user_roles add constraint FKhfh9dx7w3ubf1co1vdev94g3f foreign key (user_id) references users;
\nalter table if exists users add constraint FKieuksut4ubn2x0gc088ihhni6 foreign key (client_id) references participants;