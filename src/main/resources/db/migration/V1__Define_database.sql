alter table if exists comments drop constraint if exists FKqlnldlmqfykrj98m7sg9fal7;
alter table if exists documents drop constraint if exists FKcaosxk6vnuhcwvhh6j1g8nv93;
alter table if exists documents_comments drop constraint if exists FKlcn99fv9iks4xg2ku7u7ujmc2;
alter table if exists documents_comments drop constraint if exists FKhv1tobi66jd50o2egire1fh7f;
alter table if exists documents_resources drop constraint if exists FKkpmvr50b4j8j8ksis6fchdjh1;
alter table if exists documents_resources drop constraint if exists FKco3klwhhm4mq5s2aepaf84v94;
alter table if exists participants drop constraint if exists FKc5j1r3h4hsb2saa1g8w3x2fhs;
alter table if exists participants_teams drop constraint if exists FKbqx7qqq9aes227khhn9nmk6j6;
alter table if exists participants_teams drop constraint if exists FK3kd2o6x6qq3tgt3bk8aaxflcu;
alter table if exists process_documents drop constraint if exists FKk2sgvim9u94klq5sf94rm456r;
alter table if exists process_documents drop constraint if exists FKrxo6ejpt9i7rsw4qn24hf00wj;
alter table if exists processes drop constraint if exists FKm827ltqvynv75wfjkyd9p730i;
alter table if exists processes_steps drop constraint if exists FKmatq36tvnbovigioaq5dblo92;
alter table if exists processes_steps drop constraint if exists FKpsgdkae7aie9fibwtgqq1599w;
alter table if exists step_participant_rule drop constraint if exists FKi9wqmxlsrc6nacf6loydtpcty;
alter table if exists steps_participants drop constraint if exists FK28qdtk48ay0myx3ycoffxdbpp;
alter table if exists steps_participants drop constraint if exists FKdmicjiry2vxx90u1agonpwsvx;
alter table if exists teams_participants drop constraint if exists FK7894q8hmdc6nmh3odsg8hccg7;
alter table if exists teams_processes drop constraint if exists FK13ueaqtco2bsw2qsp65omnj6x;
alter table if exists teams_processes drop constraint if exists FKetpsy6fdhjc9gs8440yd263x4;
alter table if exists user_roles drop constraint if exists FKhfh9dx7w3ubf1co1vdev94g3f;
alter table if exists users drop constraint if exists FKieuksut4ubn2x0gc088ihhni6;
drop table if exists comments cascade;
drop table if exists document_types cascade;
drop table if exists documents cascade;
drop table if exists documents_comments cascade;
drop table if exists documents_resources cascade;
drop table if exists participants cascade;
drop table if exists participants_teams cascade;
drop table if exists process_documents cascade;
drop table if exists processes cascade;
drop table if exists processes_steps cascade;
drop table if exists resources cascade;
drop table if exists step_participant_rule cascade;
drop table if exists steps cascade;
drop table if exists steps_participants cascade;
drop table if exists teams cascade;
drop table if exists teams_participants cascade;
drop table if exists teams_processes cascade;
drop table if exists user_roles cascade;
drop table if exists users cascade;
create table comments (id int8 generated by default as identity, text varchar(255), author_id int8, primary key (id));
create table document_types (id int8 generated by default as identity, default_format varchar(255), title varchar(255), primary key (id));
create table documents (id varchar(255) not null, file oid, title varchar(255), type_id int8, primary key (id));
create table documents_comments (document_id varchar(255) not null, comments_id int8 not null);
create table documents_resources (document_id varchar(255) not null, resources_id int8 not null);
create table participants (id int8 generated by default as identity, owner_id int8, primary key (id));
create table participants_teams (participant_id int8 not null, teams_title varchar(255) not null);
create table process_documents (step_id int8 not null, documents_id varchar(255) not null, primary key (step_id, documents_id));
create table processes (id int8 generated by default as identity, title varchar(255), current_step_id int8, primary key (id));
create table processes_steps (process_id int8 not null, steps_id int8 not null);
create table resources (id int8 generated by default as identity, description varchar(255), value varchar(255), primary key (id));
create table step_participant_rule (participant_id int8 not null, rules int4, step_id int8 not null, primary key (participant_id, step_id));
create table steps (id int8 generated by default as identity, number int4, title varchar(255), primary key (id));
create table steps_participants (step_id int8 not null, participants_id int8 not null, primary key (step_id, participants_id));
create table teams (title varchar(255) not null, team_leader_id int8, primary key (title));
create table teams_participants (team_id varchar(255) not null, participants varchar(255));
create table teams_processes (team_title varchar(255) not null, processes_id int8 not null);
create table user_roles (user_id int8 not null, roles varchar(255));
create table users (id int8 generated by default as identity, online boolean, password varchar(255), username varchar(255), client_id int8, primary key (id));
alter table if exists document_types add constraint UK_9rf74xggsw52iquiq306ij2ea unique (title);
alter table if exists documents_comments add constraint UK_pbghqpftdmk4lue8faht7229k unique (comments_id);
alter table if exists documents_resources add constraint UK_3qmotjd54axtppmqjb3ktoa3n unique (resources_id);
alter table if exists process_documents add constraint UK_qjtjxvi667v6onppk3xt9v4o2 unique (documents_id);
alter table if exists processes_steps add constraint UK_dqkh3n8goxjqgyc82fukd8l83 unique (steps_id);
alter table if exists steps_participants add constraint UK_e6pmg7eo2eeppyybtvq510ibs unique (participants_id);
alter table if exists teams_processes add constraint UK_beur1pk8tqx8skongipsijgwy unique (processes_id);
alter table if exists users add constraint UK_r43af9ap4edm43mmtq01oddj6 unique (username);
alter table if exists comments add constraint FKqlnldlmqfykrj98m7sg9fal7 foreign key (author_id) references participants;
alter table if exists documents add constraint FKcaosxk6vnuhcwvhh6j1g8nv93 foreign key (type_id) references document_types;
alter table if exists documents_comments add constraint FKlcn99fv9iks4xg2ku7u7ujmc2 foreign key (comments_id) references comments;
alter table if exists documents_comments add constraint FKhv1tobi66jd50o2egire1fh7f foreign key (document_id) references documents;
alter table if exists documents_resources add constraint FKkpmvr50b4j8j8ksis6fchdjh1 foreign key (resources_id) references resources;
alter table if exists documents_resources add constraint FKco3klwhhm4mq5s2aepaf84v94 foreign key (document_id) references documents;
alter table if exists participants add constraint FKc5j1r3h4hsb2saa1g8w3x2fhs foreign key (owner_id) references users;
alter table if exists participants_teams add constraint FKbqx7qqq9aes227khhn9nmk6j6 foreign key (teams_title) references teams;
alter table if exists participants_teams add constraint FK3kd2o6x6qq3tgt3bk8aaxflcu foreign key (participant_id) references participants;
alter table if exists process_documents add constraint FKk2sgvim9u94klq5sf94rm456r foreign key (documents_id) references documents;
alter table if exists process_documents add constraint FKrxo6ejpt9i7rsw4qn24hf00wj foreign key (step_id) references steps;
alter table if exists processes add constraint FKm827ltqvynv75wfjkyd9p730i foreign key (current_step_id) references steps;
alter table if exists processes_steps add constraint FKmatq36tvnbovigioaq5dblo92 foreign key (steps_id) references steps;
alter table if exists processes_steps add constraint FKpsgdkae7aie9fibwtgqq1599w foreign key (process_id) references processes;
alter table if exists step_participant_rule add constraint FKi9wqmxlsrc6nacf6loydtpcty foreign key (participant_id) references steps;
alter table if exists steps_participants add constraint FK28qdtk48ay0myx3ycoffxdbpp foreign key (participants_id) references participants;
alter table if exists steps_participants add constraint FKdmicjiry2vxx90u1agonpwsvx foreign key (step_id) references steps;
alter table if exists teams_participants add constraint FK7894q8hmdc6nmh3odsg8hccg7 foreign key (team_id) references teams;
alter table if exists teams_processes add constraint FK13ueaqtco2bsw2qsp65omnj6x foreign key (processes_id) references processes;
alter table if exists teams_processes add constraint FKetpsy6fdhjc9gs8440yd263x4 foreign key (team_title) references teams;
alter table if exists user_roles add constraint FKhfh9dx7w3ubf1co1vdev94g3f foreign key (user_id) references users;
alter table if exists users add constraint FKieuksut4ubn2x0gc088ihhni6 foreign key (client_id) references participants;